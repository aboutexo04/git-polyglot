name: Test Translation Action

on:
  workflow_dispatch:

jobs:
  test:
    runs-on: ubuntu-latest
    
    # ğŸ”‘ [í•„ìˆ˜] 403 ì—ëŸ¬ í•´ê²°ì„ ìœ„í•œ ì¶œì…ì¦ ë°œê¸‰
    permissions:
      contents: write

    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Run GitPolyglot
        uses: ./ 
        with:
          openrouter_api_key: ${{ secrets.OPENROUTER_API_KEY }}
          target_languages: 'ko'
          source_file: 'README.md'
          # ğŸ‘‡ [ë³€ê²½] í•œêµ­ì–´ ì˜í•˜ê³  ëˆˆì¹˜ ë¹ ë¥¸ 'Qwen 2 7B (ë¬´ë£Œ)' ì ìš©
          model_name: 'qwen/qwen-2-7b-instruct:free' 

      - name: Commit and Push changes
        run: |
          git config --global user.name "GitPolyglot Bot"
          git config --global user.email "bot@gitpolyglot.com"
          
          # íŒŒì¼ ëª©ë¡ í™•ì¸
          ls -al 
          
          # ë²ˆì—­ëœ íŒŒì¼ ì¶”ê°€
          git add README.ko.md
          
          # ì»¤ë°‹ & í‘¸ì‹œ
          git commit -m "Auto-translated README by Qwen" || echo "No changes to commit"
          git push
