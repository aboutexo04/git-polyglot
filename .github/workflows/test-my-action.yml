name: Test GitPolyglot Manually

on: 
  workflow_dispatch:

permissions:
  contents: write

jobs:
  test-translation:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      # í…ŒìŠ¤íŠ¸ë¥¼ ìœ„í•´ ê°€ì§œ README.md íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤
      - name: Create dummy README
        run: |
          echo "# Hello OpenRouter Project" > README.md
          echo "This is a test to verify if Gemini 2.0 Flash works via OpenRouter." >> README.md
          echo "## Features" >> README.md
          echo "- Fast translation" >> README.md
          echo "- Developer friendly" >> README.md

      # ìˆ˜ì •í•œ GitPolyglot ì•¡ì…˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤
      - name: Run GitPolyglot
        uses: ./ 
        with:
          # ì•„ê¹Œ ë“±ë¡í•œ Secretì„ ì—¬ê¸°ì„œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤
          openrouter_api_key: ${{ secrets.OPENROUTER_API_KEY }}
          target_languages: 'ko'
          source_file: 'README.md'
          # ë¬´ë£Œ ëª¨ë¸ì¸ ì œë¯¸ë‚˜ì´ 2.0 í”Œë˜ì‹œ ì‚¬ìš© (ì›í•˜ë©´ claude-3-5-sonnet ë“±ìœ¼ë¡œ ë³€ê²½ ê°€ëŠ¥)
          model_name: 'meta-llama/llama-3.1-8b-instruct:free'
      
      # (ìˆ˜ì •) ğŸ‘‡ ì´ë ‡ê²Œ ë°”ê¾¸ì„¸ìš”
      - name: Commit and Push changes
        run: |
          git config --global user.name "GitPolyglot Bot"
          git config --global user.email "bot@gitpolyglot.com"
          
          # ì•ˆì „ì¥ì¹˜: ì›ë³¸ì€ ê±´ë“œë¦¬ì§€ ë§ê³  ë²ˆì—­ëœ íŒŒì¼ë§Œ ì¶”ê°€
          git add README.ko.md
          
          git commit -m "Auto-translated README" || echo "No changes to commit"
          git push